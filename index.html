<!doctypehtml>
  <html class="h-full bg-gray-100">
    <head>
      <meta charset=utf-8>
      <title>Temp</title>
      <meta content=TempTempTempTempTempTempTempTemp name=description>
      <meta content="width=device-width,initial-scale=1" name=viewport>
      <meta content="no-cache, no-store, must-revalidate" http-equiv=Cache-Control>
      <meta content=no-cache http-equiv=Pragma>
      <meta content=0 http-equiv=Expires>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"></script>
      <script src="https://cdn.tailwindcss.com"></script>
      <script crossorigin=anonymous integrity="sha512-pumBsjNRGGqkPzKHndZMaAG+bir374sORyzM3uulLV14lN5LyykqNk8eEeUlUkB3U0M4FApyaHraT65ihJhDpQ==" referrerpolicy=no-referrer src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js></script>
    </head>
    <body class="h-full">
      <div class="min-h-full pb-20">
        <div class="relative">
          <div class="relative mx-auto max-w-2xl py-24 px-6 lg:max-w-7xl lg:py-32 lg:px-8">
            <div class="relative">
              <h1 class="text-3xl font-bold tracking-tight text-gray-900 sm:text-5xl sm:leading-none lg:text-6xl">Project Delta</h1>
              <p class="mt-6 max-w-2xl text-xl text-gray-500">Welcome back user [something], please choose one of four options listed bellow.</p>
            </div>
          </div>
        </div>
        <main>
          <section class="relative" aria-labelledby="pricing-heading">
            <div class="mx-auto space-y-12 px-6 lg:grid lg:max-w-7xl lg:grid-cols-4 lg:gap-x-4 lg:space-y-0 lg:px-8">
              <div class="relative flex flex-col rounded-2xl border border-gray-200 bg-white p-8 shadow-sm">
                <div class="flex-1">
                  <h3 class="text-xl font-semibold text-gray-900">Optimization</h3>
                  <p class="absolute top-0 -translate-y-1/2 transform rounded-full bg-rose-500 py-1.5 px-4 text-sm font-semibold text-white">Last optimization: 0000-02-02</p>
                  <p class="mt-6 text-gray-500">Lorem ipsum dolor sit amet consectetur, adipisicing elit. Quos, odio, nihil natus libero distinctio.</p>
                </div><button id=optimize class="bg-rose-50 text-rose-700 hover:bg-rose-100 mt-8 block w-full py-3 px-6 border border-transparent rounded-md text-center font-medium">Begin</button>
              </div>
              <div class="relative flex flex-col rounded-2xl border border-gray-200 bg-white p-8 shadow-sm">
                <div class="flex-1">
                  <h3 class="text-xl font-semibold text-gray-900">One file scan</h3>
                  <p class="absolute top-0 -translate-y-1/2 transform rounded-full bg-rose-500 py-1.5 px-4 text-sm font-semibold text-white">Last scan: 0000-02-02</p>
                  <p class="mt-6 text-gray-500">Lorem ipsum dolor sit amet consectetur, adipisicing elit. Quos, odio, nihil natus libero distinctio.</p>
                </div><button id="one_file" class="bg-rose-500 text-white hover:bg-rose-600 mt-8 block w-full py-3 px-6 border border-transparent rounded-md text-center font-medium">Begin</button>
              </div>
              <div class="relative flex flex-col rounded-2xl border border-gray-200 bg-white p-8 shadow-sm">
                <div class="flex-1">
                  <h3 class="text-xl font-semibold text-gray-900">Scan entire PC</h3>
                  <p class="absolute top-0 -translate-y-1/2 transform rounded-full bg-rose-500 py-1.5 px-4 text-sm font-semibold text-white">Last scan: 0000-02-02</p>
                  <p class="mt-6 text-gray-500">Lorem ipsum dolor sit amet consectetur, adipisicing elit. Quos, odio, nihil natus libero distinctio.</p>
                </div><button id="scan" class="bg-rose-500 text-white hover:bg-rose-600 mt-8 block w-full py-3 px-6 border border-transparent rounded-md text-center font-medium">Begin</button>
              </div>
              <div class="relative flex flex-col rounded-2xl border border-gray-200 bg-white p-8 shadow-sm">
                <div class="flex-1">
                  <h3 class="text-xl font-semibold text-gray-900">Regenerate keys</h3>
                  <p class="absolute top-0 -translate-y-1/2 transform rounded-full bg-rose-500 py-1.5 px-4 text-sm font-semibold text-white">Last generation: 0000-02-02</p>
                  <p class="mt-6 text-gray-500">Lorem ipsum dolor sit amet consectetur, adipisicing elit. Quos, odio, nihil natus libero distinctio.</p>
                </div><button id="repair" class="bg-rose-50 text-rose-700 hover:bg-rose-100 mt-8 block w-full py-3 px-6 border border-transparent rounded-md text-center font-medium">Begin</button>
              </div>
            </div>
          </section>
          <div class="relative mt-10">
            <div aria-hidden="true" class="absolute inset-x-0 h-1/2 "></div>
            <div class="relative mx-auto max-w-2xl px-6 lg:max-w-7xl lg:px-8">
              <div class="relative overflow-hidden rounded-xl bg-rose-500 py-24 px-8 shadow-2xl lg:grid lg:grid-cols-2 lg:gap-x-8 lg:px-16">
                <div class="absolute inset-0 opacity-50 mix-blend-multiply saturate-0 filter"><img src="https://images.unsplash.com/photo-1601381718415-a05fb0a261f3?ixid=MXwxMjA3fDB8MHxwcm9maWxlLXBhZ2V8ODl8fHxlbnwwfHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1216&q=80" alt="" class="h-full w-full object-cover"></div>
                <div class="relative lg:col-span-1">
                  <blockquote class="mt-6 text-white">
                    <p class="text-xl font-medium sm:text-2xl">This project is a simple demonstration on how anyone can build a fairly simple antivirus with device optimization capabilities.</p>
                    <footer class="mt-6">
                      <p class="flex flex-col font-medium"><span>Laurynas Bieleviƒçius</span><span>Mr. None</span></p>
                    </footer>
                  </blockquote>
                </div>
              </div>
            </div>
          </div>
        </main>
      </div>
      
      <div aria-live="assertive" class="notification hidden pointer-events-none fixed inset-0 flex flex-col items-end px-4 py-6 sm:items-start sm:p-6" style="flex-wrap:wrap;"></div>
     
      <div id="one_file_modal" class="hidden relative z-10 " aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>
        <div class="fixed inset-0 z-10 overflow-y-auto">
          <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
            <div class="relative transform overflow-hidden rounded-lg bg-white px-4 pt-5 pb-4 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-sm sm:p-6">
              <div>
                <div class="text-center">
                  <h3 class="text-lg font-medium leading-6 text-gray-900" id="modal-title">Drag a file to scan</h3>
                  <div class="mt-2">
                    <div class="sm:grid  sm:items-start sm:gap-4 sm:border-t sm:border-gray-200 sm:pt-5">
                      <div class="mt-1 sm:col-span-2 sm:mt-0">
                        <div class="flex max-w-lg justify-center rounded-md border-2 border-dashed border-gray-300 px-6 pt-5 pb-6">
                          <div id="drop_zone" class="space-y-1 text-center"><svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true">
                              <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                            <div class="text-sm text-gray-600">
                              <p class="pl-1">Drag and drop</p>
                            </div>
                            <p class="text-xs text-gray-500">Everything will be done automatically</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="mt-5 sm:mt-6"><button id="close_one_file" type="button" class="mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-rose-500 focus:ring-offset-2 sm:col-start-1 sm:mt-0 sm:text-sm">Cancel</button></div>
            </div>
          </div>
        </div>
      </div>
      <script>
      $(document).ready(function() {
        let counter = 0;
        const notification = $('.notification');
        const dropZone = $('#drop_zone');
        const buttons = {
          optimize: '[optimize]',
          scan: '[scan]',
          repair: '[repair]',
        };


        function displayNotification(title, recieved_message, duration) {
          counter++;
          let id = counter;
          let messageObj;
          try {
            messageObj = JSON.parse(recieved_message);
          } catch (error) {
            messageObj = {
              status: title.charAt(0).toUpperCase() + title.slice(1),
              message: recieved_message,
              removed: ''
            };
          }

          const {
            status,
            message,
            removed
          } = messageObj;

          const html = `
                      <div id="msg-${id}" class="mb-1 flex w-full flex-col items-center space-y-4 sm:items-end">
                        <div class="pointer-events-auto w-full max-w-sm overflow-hidden rounded-lg bg-white shadow-lg ring-1 ring-black ring-opacity-5">
                            <div class="p-4">
                                <div class="flex items-start">
                                    <div class="flex-shrink-0"><svg class="h-6 w-6" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16zM2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12zm5.793-4.207a1 1 0 0 1 1.414 0L12 10.586l2.793-2.793a1 1 0 1 1 1.414 1.414L13.414 12l2.793 2.793a1 1 0 0 1-1.414 1.414L12 13.414l-2.793 2.793a1 1 0 0 1-1.414-1.414L10.586 12 7.793 9.207a1 1 0 0 1 0-1.414z" fill="#DE3163"/></svg></div>
                                    <div
                                        class="ml-3 w-0 flex-1 pt-0.5">
                                        <p class="text-sm font-medium text-gray-900">${status}</p>
                                        <p class="mt-1 text-sm text-gray-500">${message}</p>
                                        <p class="mt-1 text-sm text-gray-500">${removed}</p>
                                </div>
                            </div>
                        </div>
                        </div>
                      </div>`;

          notification.append(html);
          setTimeout(function() {
            $('#msg-' + id).remove();
            if (notification.children().length === 0) {
              notification.addClass('hidden');
            }
          }, duration);
          notification.removeClass('hidden');
        }


        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
          dropZone.on(eventName, e => {
            e.preventDefault();
            e.stopPropagation();
          });
        });


        const post = (url, requestData) => {
          $.post(url, requestData, (data, status) => {
            console.log(`Response data: ${data}`);
            console.log(`Response status: ${status}`);
            displayNotification(status, data, 5000);
          }).fail((jqXHR, textStatus, errorThrown) => {
            displayNotification(
              'Program not opened.',
              "We can't seem to find our program running on your computer, please check if it's open or not.",
              5000
            );
          });
        };


        dropZone.on('drop', e => {
          const file = e.originalEvent.dataTransfer.files[0];
          const reader = new FileReader();

          reader.onload = e => {
            const binary = e.target.result;
            const md5Hash = CryptoJS.MD5(binary).toString();
            $('#one_file_modal').addClass('hidden');
            document.body.classList.remove('overflow-hidden');
            post('http://localhost:6969/', '[one_file]' + md5Hash);
          };

          reader.readAsBinaryString(file);
        });


        $('button').click(function() {
          let buttonId = $(this).attr('id');
          let requestData = buttons[buttonId];

          switch (buttonId) {
            case 'one_file':
              $('#one_file_modal').removeClass('hidden');
              document.body.classList.add('overflow-hidden');
              break;
            case 'close_one_file':
              $('#one_file_modal').addClass('hidden');
              document.body.classList.remove('overflow-hidden');
              break;
            default:
              post('http://localhost:6969/', requestData);
          }
        });
      });
      </script>
    </body>
  </html>